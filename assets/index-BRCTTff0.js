import{r as e}from"./vendor-BVO-RcBT.js";var t=new Map,r=new WeakMap,n=0;function i(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(i=e.root,i?(r.has(i)||(n+=1,r.set(i,n.toString())),r.get(i)):"0"):e[t]}`;var i}).toString()}function o(e,r,n={},o=undefined){if(void 0===window.IntersectionObserver&&void 0!==o){const t=e.getBoundingClientRect();return r(o,{isIntersecting:o,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:t,intersectionRect:t,rootBounds:t}),()=>{}}const{id:s,observer:c,elements:a}=function(e){const r=i(e);let n=t.get(r);if(!n){const i=new Map;let o;const s=new IntersectionObserver(t=>{t.forEach(t=>{var r;const n=t.isIntersecting&&o.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(r=i.get(t.target))||r.forEach(e=>{e(n,t)})})},e);o=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:r,observer:s,elements:i},t.set(r,n)}return n}(n),l=a.get(e)||[];return a.has(e)||a.set(e,l),l.push(r),c.observe(e),function(){l.splice(l.indexOf(r),1),0===l.length&&(a.delete(e),c.unobserve(e)),0===a.size&&(c.disconnect(),t.delete(s))}}function s({threshold:t,delay:r,trackVisibility:n,rootMargin:i,root:s,triggerOnce:c,skip:a,initialInView:l,fallbackInView:u,onChange:d}={}){var h;const[g,f]=e.useState(null),v=e.useRef(d),[y,b]=e.useState({inView:!!l,entry:void 0});v.current=d,e.useEffect(()=>{if(a||!g)return;let e;return e=o(g,(t,r)=>{b({inView:t,entry:r}),v.current&&v.current(t,r),r.isIntersecting&&c&&e&&(e(),e=void 0)},{root:s,rootMargin:i,threshold:t,trackVisibility:n,delay:r},u),()=>{e&&e()}},[Array.isArray(t)?t.toString():t,g,s,i,c,a,n,u,r]);const w=null==(h=y.entry)?void 0:h.target,V=e.useRef(void 0);g||!w||c||a||V.current===w||(V.current=w,b({inView:!!l,entry:void 0}));const p=[f,y.inView,y.entry];return p.ref=p[0],p.inView=p[1],p.entry=p[2],p}export{s as u};
